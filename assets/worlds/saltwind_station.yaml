world:
  title: "The Saltwind Station"
  start: beach
  initial_inventory: [bone]
  initial_companions: []

flags: []

items:
  journal:
    name: Weathered Journal
    description: A leather-bound journal swollen with seawater. Several pages are still readable.
    aliases: [journal, book, diary]
    portable: true

  brass_whistle:
    name: Brass Whistle
    description: A small whistle engraved with a wave symbol. It looks well-used.
    aliases: [whistle, brass whistle]
    portable: true

  station_key:
    name: Station Key
    description: A heavy iron key tagged "ADMIN".
    aliases: [key, station key]
    portable: true

  radio:
    name: Shortwave Radio
    description: A battered radio with cracked dials. It hums faintly when powered.
    portable: false
    aliases: [radio]

  generator:
    name: Backup Generator
    description: A diesel generator bolted to the concrete floor.
    portable: false
    aliases: [generator]

  fuel_can:
    name: Fuel Can
    description: A half-full jerry can that smells strongly of diesel.
    aliases: [fuel, diesel, can, fuel can]
    portable: true

  lighthouse_door:
    name: Lighthouse Door
    description: A rusted steel door leading into the lighthouse tower.
    portable: false
    aliases: [door, lighthouse door]

  researcher:
    name: Elias the Researcher
    description: A tired man in a faded field jacket, eyes sharp despite the years.
    aliases: [elias, researcher]

  caretaker:
    name: Mara the Caretaker
    description: A woman with windburned skin and steady hands. She watches the sea constantly.
    aliases: [mara, caretaker]

  bone:
    name: Rubber bone
    description: A small rubber toy bone.
    aliases: [bone]

  dog:
    name: Small dog
    description: A small, friendly dog.
    aliases: [dog]

npcs:
  researcher:
    description: Elias, a man in a faded field jacket, stands nearby, jotting notes and watching the sea with a wary expression.
    persona: Analytical, guarded, quietly regretful.
    sample_lines:
      - "We were meant to observe, not interfere."
      - "The sea remembers things we try to forget."
    quest_hook: He hints that the station's final broadcast was never sent.

  caretaker:
    description: Mara, the station's caretaker, lingers near the lighthouse, her attention fixed on the horizon as if expecting the sea to answer back.
    persona: Practical, blunt, deeply attached to the station.
    sample_lines:
      - "Someone has to keep the lights working."
      - "Storm's coming. Always does."
    quest_hook: She wants the lighthouse restored.

  dog:
    description: A small hairy dog sits in an old basket, watching you hopefully.
    persona: A small enthusiastic dog.    

locations:
  beach:
    name: Shingle Beach
    description: Waves roll in under a grey sky. Driftwood and old equipment litter the shore.
    items: [journal]
    exits:
      north:
        to: station_yard
        description: A gravel path leading up toward the research station.

  station_yard:
    name: Station Yard
    description: Cracked concrete surrounded by low buildings streaked with salt.
    items: [researcher]
    exits:
      south:
        to: beach
        description: Back down to the beach.
      east:
        to: generator_room
        description: A squat building marked "POWER".
      north:
        to: main_hall
        description: Double doors hang open, creaking in the wind.

  generator_room:
    name: Generator Room
    description: The air smells of oil and rust. The generator sits silent.
    items: [generator, fuel_can]
    exits:
      west:
        to: station_yard
        description: Back to the yard.

  main_hall:
    name: Main Hall
    description: Peeling maps of ocean currents cover the walls.
    exits:
      south:
        to: station_yard
        description: Out to the yard.
      east:
        to: radio_room
        description: A narrow hallway lined with cables.
      north:
        to: lighthouse_base
        description: A stone path leading toward the lighthouse.

  radio_room:
    name: Radio Room
    description: Dusty consoles face a single desk-mounted radio.
    items: [radio, station_key, dog]    
    exits:
      west:
        to: main_hall
        description: Back to the main hall.

  lighthouse_base:
    name: Lighthouse Base
    description: The lighthouse looms overhead, paint flaking under the salt air, with a large metal door at the base.
    items: [caretaker, lighthouse_door]
    exits:
      south:
        to: main_hall
        description: Back toward the station.
      up:
        to: lighthouse_top
        description: A spiral staircase inside the lighthouse.
        requires_flags: [lighthouse_open]
        blocked_description: The door to the lighthouse is firmly shut.

  lighthouse_top:
    name: Lighthouse Lantern Room
    description: Glass panes look out over the endless sea. The light is dark.
    exits:
      down:
        to: lighthouse_base
        description: Back down the spiral stairs.

interactions:
  - verb: examine
    item: journal
    message: >
      The journal describes strange readings in the water â€” patterns that repeat like signals.
      The last entry ends abruptly.

  - verb: talk
    item: researcher
    message: >
      Elias rubs his temples. "We picked something up out there. Then command told us to stay quiet."

  - verb: use
    item: fuel_can
    target: generator
    message: The generator sputters, then roars to life. Lights flicker on across the station.
    repeatable: false
    set_flags: [power_restored]

  - verb: use
    item: station_key
    target: lighthouse_door
    requires_flags: [power_restored]
    message: The key turns with a metallic groan. The lighthouse door unlocks. Inside a spiral stairway leads upward.
    set_flags: [lighthouse_open]

  - verb: open
    item: lighthouse_door
    message: The door is locked, and will not open.

  - verb: use
    item: station_key
    target: lighthouse_door
    blocking_flags: [power_restored]
    message: The key appears to fit, but the door is too heavy to open manually.

  - verb: talk
    item: caretaker
    message: >
      Mara nods as the lights come back on. "Good. Maybe the sea will forgive us yet."

  - verb: use
    item: radio
    requires_flags: [power_restored]
    message: >
      Static clears, replaced by a repeating signal - coordinates, looping endlessly.
      Someone is still listening.

  - verb: use
    item: radio
    blocking_flags: [power_restored]
    message: >
      The radio is dead.

  - verb: talk
    item: dog
    message: "\"Woof!\""

  - verb: give
    item: bone
    target: dog
    consumes: true
    message: "The dog accepts the toy bone and begins chewing on it."
    set_flags:
      - "companion:dog"
